<head><meta http-equiv="" content="3"></head>
<div class="ingredient-list">
  <ul class="nav justify-content-center" id="pills-tab" role="tablist">
    <li class="nav-item">
      <a class="nav-link active rounded-left" id="pills-profile-tab" data-toggle="pill" href="#pill-recipe" role="tab" aria-controls="pills-home">Recipes</a>
    </li>
    <li class="nav-item">
      <a class="nav-link rounded-right" id="pills-list-tab" data-toggle="pill" href="#pill-list" role="tab" aria-controls="pills-profile">List</a>
    </li>
  </ul>
  <div class="tab-content mt-4 mx-2" id="pills-tabContent">
    <div class="tab-pane fade show active" id="pill-recipe" role="tabpanel">
      <div class="cards">
        <div class="loading col-9 col-md-6">
          <h4 class="loading-pan">We're cooking up a new meal plan...</h4>
          <%= image_tag 'frying-pan.gif', class: "loading-pan" %>
        </div>
        <div class="row">
          <% @meal_plan.meals.each do |meal| %>
          <div class="col-12 col-sm-6 col-md-4 mt-5">
            <%= link_to meal_plan_meal_path(@meal_plan, meal), class: 'recipe-link', :action => 'go' do %>
            <div class="recipe-card">
              <%= image_tag meal.image_url, crop: :fill %>
              <div class="recipe-info">
                <h5><%= meal.title %></h5>
                <p>recipe details</p>
              </div>
            </div>
            <% end %>
          </div>
          <% end %>
        </div>
      </div>
    </div>
    <script>
      <%# while @meal_plan.meals.any? %>
      <% if @meal_plan.meals.empty? %>
      // removeFryingPan();
      <% end %>
      <%# end %>
    </script>
    <div class="tab-pane fade" id="pill-list" role="tabpanel" >
      <div class="loading col-12 col-md-6">
        <h4 class="loading-pan">We're cooking up a new meal plan...</h4>
        <%= image_tag 'frying-pan.gif', class: "loading-pan" %>
      </div>
      <%= simple_form_for :purchased, url: meal_plan_path(@meal_plan), method: 'patch' do |f| %>
        <%= f.submit %>
        <% @meal_plan.ingr_by_aisle.each do |aisle, ingr_hash| %>
          <span class="aisle"><h2><%= aisle %></h2></span> <br>
          <div class="ingr-list d-none">
            <div class="row">
              <% ingr_hash.each do |ingr_name, dose_info| %>
                <% unless dose_info[0] == 0 %>
                  <div class="list-item mt-3 dose">
                    <%= ingr_name %> <%= dose_info[0] %>
                    <div class="purchased">
                      <%= f.input dose_info[1], as: :boolean, input_html: { checked: Dose.find(dose_info[1]).purchased } %>
                    </div>
                  </div>
                <% end %>
              <%end%>
            </div>
          </div>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
